



```
curl -LO https://raw.githubusercontent.com/pspcps/Arcade/refs/heads/main/GSP338.sh

sudo chmod +x GSP338.sh

./GSP338.sh
```


IF tast 4 not work after 20 min than try to execute bellow command in shell and wait for few min. and if than also not working means issue is with lab side restart and try again


```

DASHBOARD_NAME="Media_Dashboard"
DASHBOARD_ID=$(gcloud monitoring dashboards list --format="value(name)" --filter="displayName=$DASHBOARD_NAME")

if [[ -z "$DASHBOARD_ID" ]]; then
  echo "Dashboard '$DASHBOARD_NAME' not found!"
  exit 1
fi

gcloud monitoring dashboards describe "$DASHBOARD_ID" --format=json > media_dashboard.json
echo "Media_Dashboard JSON exported."

echo "Injecting new charts into Media_Dashboard JSON..."

# Define the charts to be added
cat <<EOF > charts.json
[
  {
    "title": "High-Res Video Upload Rate",
    "xyChart": {
      "dataSets": [
        {
          "timeSeriesQuery": {
            "timeSeriesFilter": {
              "filter": "metric.type=\"logging.googleapis.com/user/big_video_upload_rate\"",
              "aggregation": {
                "alignmentPeriod": "60s",
                "perSeriesAligner": "ALIGN_RATE"
              }
            }
          }
        }
      ],
      "timeshiftDuration": "0s",
      "yAxis": {
        "label": "Upload Rate",
        "scale": "LINEAR"
      }
    }
  },
  {
    "title": "OpenCensus - Video Input Queue Length",
    "xyChart": {
      "dataSets": [
        {
          "timeSeriesQuery": {
            "timeSeriesFilter": {
              "filter": "metric.type=\"custom.googleapis.com/opencensus/my.videoservice.org/measure/input_queue_size\"",
              "aggregation": {
                "alignmentPeriod": "60s",
                "perSeriesAligner": "ALIGN_MEAN"
              }
            }
          }
        }
      ],
      "timeshiftDuration": "0s",
      "yAxis": {
        "label": "Queue Length",
        "scale": "LINEAR"
      }
    }
  }
]
EOF

# Ensure jq is installed
if ! command -v jq &> /dev/null; then
  echo "Installing jq for JSON processing..."
  sudo apt-get update && sudo apt-get install jq -y
fi

# Merge charts into existing dashboard, preserving etag and structure
jq --argjson charts "$(cat charts.json)" '
  .gridLayout.widgets += $charts
' media_dashboard.json > updated_media_dashboard.json

echo "Updating Media_Dashboard with new charts..."
gcloud monitoring dashboards update "$DASHBOARD_ID" --config-from-file=updated_media_dashboard.json
echo "âœ… Dashboard updated successfully with new charts!"


```
